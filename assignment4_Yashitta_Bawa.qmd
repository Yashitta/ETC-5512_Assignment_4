---
title: "What Drives Viewer Engagement on Netflix?"
subtitle: "Assignment 4 ETC5512"
author: Yashitta Bawa
format: html
editor: visual
message: false
warning: false
---

::: panel-tabset
<!-- Task 1 Tab: Data and Documenting -->

## Data Details

### üß† Research Question

This project explores the question: **What drives viewer engagement on Netflix?**

The aim is to identify which types of content‚Äîsuch as genres, release formats, or show types‚Äîtend to receive the highest viewership. In particular, the analysis considers:

-   Whether certain genres (e.g. documentaries, thrillers, reality) attract more sustained attention\
-   Whether newer titles perform better than older ones\
-   What common characteristics are shared by the most-watched shows

This question was chosen because streaming services like Netflix play a large role in everyday entertainment. Understanding what makes certain content more engaging can offer useful insights into viewer preferences, binge-watching trends, and content design.

------------------------------------------------------------------------

### üìÅ The Data

Two datasets were used in this project:

1.  **Netflix Engagement Report (Jan‚ÄìJun 2023)**\
    This dataset, published by Netflix, includes total hours watched globally for each title, along with release dates. It reflects real-world viewership patterns and serves as a direct measure of audience engagement.

2.  **Netflix Titles Metadata (from Kaggle)**\
    This dataset includes descriptive information about Netflix content such as title, type (TV show or movie), duration (either runtime in minutes or season count), genre categories, and release year.

These datasets were chosen because they are **publicly available**, contain the **relevant variables** needed to explore the research question, and are **up-to-date** as of 2023.

They are suitable for the intended analysis because: - The engagement data directly measures viewer attention - The metadata enables grouping by format and genre - Both are observational and compatible in structure after cleaning

**Licensing**:

-   The engagement report is published by Netflix and freely downloadable from the Netflix What We Watched site

-   The titles dataset is available on Kaggle under a public license

------------------------------------------------------------------------

### üõ†Ô∏è Data Collection and Preparation

**Download Process:**

-   The engagement data was downloaded as an Excel spreadsheet from the Netflix What We Watched website.

-   The metadata was downloaded in CSV format from Kaggle.

**Data Cleaning and Processing:**

-   The engagement report included a non-tabular header section, which was skipped. - Column names were cleaned and standardised using the `janitor` package.

-   The `title` column was standardised across both datasets by converting to lowercase and trimming white-space.

-   Only relevant variables were retained, including title, hours viewed, release date, genre, and type.

-   The two datasets were merged using a cleaned `title` column.

-   Some shows appear in the engagement data multiple times (e.g. one row per season). These were retained for more granular analysis.

-   The `duration` column reflects minutes for movies and season count for TV shows. This limits direct comparisons across formats.

These steps ensured the dataset was clean, merged, and ready for structured analysis and visualisation.

```{r}
# Loaded required libraries
library(readr)
library(readxl)
library(here)
library(janitor)
library(dplyr)
library(stringr)
library(lubridate)
library(tidyr)
library(ggplot2)
library(plotly)
library(scales)
library(ggridges)
library(patchwork)

# Loaded the datasets
titles <- read_csv(here("data/netflix_titles.csv")) %>% 
  clean_names()
engagement_report <- read_excel(here("data/Netflix_Engagement_Report.xlsx"), 
                                     skip = 5) %>% 
  clean_names()

# Standardised the titles for merging
titles <- titles %>%
  mutate(title_clean = str_to_lower(str_trim(title)))

engagement_report <- engagement_report %>%
  mutate(title_clean = str_to_lower(str_trim(title)),
    release_year = lubridate::year(release_date))

# Merged datasets using a left join
netflix_clean <- left_join(engagement_report, titles, by = "title_clean") %>%
  filter(!is.na(type), !is.na(duration), !is.na(listed_in)) %>%
  mutate(
    release_year = lubridate::year(release_date)) %>%
  select(title = title.x,
         release_date,
         hours_viewed,
         release_year,
         type, 
         duration, 
         listed_in)

# Added a new column with season removed
netflix_clean <- netflix_clean %>%
  mutate(base_title = str_remove(title, ": Season \\d+|: Limited Series"))

# Group by base title + genre/type and summarise
netflix_grouped <- netflix_clean %>%
  group_by(base_title, type, listed_in) %>%
  summarise(
    total_hours = sum(hours_viewed, na.rm = TRUE),
    .groups = "drop")

# Separated movie duration (in minutes) and show duration (season count)
netflix_clean <- netflix_clean %>%
  mutate(
    duration_num = parse_number(duration),
    duration_type = case_when(
      str_detect(duration, "min") ~ "minutes",
      str_detect(duration, "Season") ~ "seasons",
      TRUE ~ "unknown"))
```

------------------------------------------------------------------------

### üìä Dataset Creation for Visualisation

**Genre Breakdown: Most Watched Categories Overall**

To understand which genres attract the most viewership, multi-genre entries were separated and total hours viewed were aggregated for each individual genre.

To compare trends across formats, the dataset was further grouped by both `type` (Movie or TV Show) and `genre`. The top 10 genres were selected separately for each format based on total viewing hours, then combined into a single dataset to allow visual comparison. While some genres appeared in both lists (e.g. Dramas, Sci-Fi & Fantasy), others were format-specific ‚Äî such as Crime TV Shows or Romantic Movies.

This preparation enabled a clear side-by-side breakdown of audience preferences by format, shown through a faceted bar chart in the blog post tab. The plot offers insight into which genres perform better within each format and highlights how structural differences in content affect viewership.

```{r}
genre_summary <- netflix_clean %>%
  separate_rows(listed_in, sep = ",\\s*") %>%
  group_by(listed_in) %>%
  summarise(total_hours = sum(hours_viewed, na.rm = TRUE)) %>%
  arrange(desc(total_hours)) %>%
  slice_head(n = 10)

# Preprocess genre order
genre_summary <- genre_summary %>%
  mutate(listed_in = factor(listed_in, 
                            levels = listed_in[order(total_hours)]))
```

**Genre Preferences by Format**

To compare viewership patterns between TV shows and movies, titles were grouped by type and summary statistics such as mean and median hours viewed were calculated.

To further investigate genre-based viewing patterns across both formats, titles were grouped by both `type` and `genre`, and total viewing hours were aggregated.\
Separate top 10 genres were selected for each format to highlight the most popular content, and overlapping genres were retained for comparison.

This dataset was used to create a **side-by-side faceted bar chart**, showing the top genres by total hours viewed for **movies** on the left and **TV shows** on the right.\
The layout helps highlight which genres perform better within each content format.

```{r}
format_summary <- netflix_clean %>%
  group_by(type) %>%
  summarise(
    mean_hours = mean(hours_viewed, na.rm = TRUE),
    median_hours = median(hours_viewed, na.rm = TRUE),
    count = n())

# Full summary of genres by format
genre_all <- netflix_clean %>%
  separate_rows(listed_in, sep = ",\\s*") %>%
  group_by(type, genre = listed_in) %>%
  summarise(hours_viewed = sum(hours_viewed, na.rm = TRUE), .groups = "drop")

# Top 10 Movie genres
top_movie_genres <- genre_all %>%
  filter(type == "Movie") %>%
  arrange(desc(hours_viewed)) %>%
  slice_head(n = 10) %>%
  pull(genre)

# Top 10 TV genres
top_tv_genres <- genre_all %>%
  filter(type == "TV Show") %>%
  arrange(desc(hours_viewed)) %>%
  slice_head(n = 10) %>%
  pull(genre)

# Combine all 20 genres (with overlap if any)
selected_genres <- union(top_movie_genres, top_tv_genres)

# Final dataset: includes Movie + TV rows for those 20 genres
genre_by_type <- genre_all %>%
  filter(genre %in% selected_genres)
```

**Duration vs. Format**

To explore how content length varies between movies and TV shows, the `duration` column was cleaned and separated into two distinct units: **minutes** (for movies) and **seasons** (for shows). These values were extracted numerically and stored in a new column called `duration_num`.

Entries marked as "other" or with missing type/duration values were filtered out. This created a consistent dataset for comparing structural differences in content length.

The dataset was then split by format (`Movie` vs `TV Show`) and visualised using **violin plots**. Each plot shows the distribution of durations across titles, allowing insight into how runtime conventions differ by format.

For instance, movies typically fall within the 90‚Äì120 minute range, while most TV shows cluster around 1‚Äì2 seasons. This transformation supports a focused visualisation of **duration norms** and sets the foundation for analysing their relationship with viewer engagement.

```{r}
duration_clean <- netflix_clean %>%
  mutate(
    duration_num = readr::parse_number(duration),
    duration_type = case_when(
      str_detect(duration, "min") ~ "minutes",
      str_detect(duration, "Season") ~ "seasons",
      TRUE ~ "other")) %>%
  filter(!is.na(duration_num))

# Clean duration data
duration_clean <- netflix_clean %>%
  filter(!is.na(duration), 
         !is.na(type)) %>%
  mutate(
    duration_num = case_when(
      str_detect(duration, "min") ~ parse_number(duration),
      str_detect(duration, "Season") ~ parse_number(duration),
      TRUE ~ NA_real_),
    duration_unit = case_when(
      str_detect(duration, "min") ~ "Minutes",
      str_detect(duration, "Season") ~ "Seasons",
      TRUE ~ "Other")) %>%
  filter(!is.na(duration_num), 
         duration_unit != "Other")
```

------------------------------------------------------------------------

### üìö References

-   Netflix. *What We Watched: A Netflix Engagement Report*. Retrieved from: https://www.netflix.com/whatwewatched\
-   Shivamb. *Netflix Movies and TV Shows Dataset*. Retrieved from: https://www.kaggle.com/datasets/shivamb/netflix-shows\
-   R Packages used: `readxl`, `readr`, `dplyr`, `stringr`, `janitor`, `lubridate`, `here`, `tidyr`

<!-- Task 2 Tab: Writing your blogpost -->

## Blog post

<!-- Task 3 Tab: Behind the Scenes -  -->

## Behind the Scenes

:::
